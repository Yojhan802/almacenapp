<!DOCTYPE html>
<html>
<head>
  <title>Sistema de AlmacÃ©n</title>
  <meta charset="UTF-8">
  <style>
    body { font-family: Arial; margin: 20px; }
    #error { color: red; display: none; }
  </style>
</head>
<body>
  <h1>ðŸ“¦ Productos en AlmacÃ©n</h1>
  <br>
  <input type="submit" value="ok" name="ok" onclick="cargarProductos()"/>
  <div id="error">âš  No se pudo conectar con el servidor. Reintentando...</div>
  <ul id="listaProductos"></ul>

  <script>
    function cargarProductos() {
      fetch("producto")
        .then(res => {
          if (!res.ok) throw new Error("Error conexiÃ³n");
          return res.json();
        })
        .then(data => {
          document.getElementById("error").style.display = "none";
          let lista = document.getElementById("listaProductos");
          lista.innerHTML = "";
          data.forEach(p => {
            let item = document.createElement("li");
            item.textContent = `${p.nombre} - Stock: ${p.stock} - S/ ${p.precio}`;
            lista.appendChild(item);
          });
        })
        .catch(() => {
          document.getElementById("error").style.display = "block";
          setTimeout(cargarProductos, 5000);
        });
    }

    
  </script>
</body>
</html>